<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../assets/ico/favicon.ico">

    <title>Salesforce Mobile SDK Tutorial</title>

    <!-- Bootstrap core CSS -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/styles.css" rel="stylesheet">
    <link href="css/syntax.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-721308-2', 'ccoenraets.github.io');
      ga('send', 'pageview');
    </script>
</head>

<body>

<div class="navbar navbar-default navbar-static-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html">Salesforce Mobile SDK Tutorial</a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li><a
                        href="https://github.com/ccoenraets/salesforce-developer-workshop"><img
                        src="images/icon-github.png" style="border: none;margin: -4px 0;height: 28px;width: 28px;"/>
                    GitHub
                    Project</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</div>


<div class="container">

<div class="row">

    <div class="col-xs-12 col-sm-8">
        <h1>Creating a Hybrid App Using the Mobile SDK CLI</h1>
        <!--<hr/>-->
        <p>There are two ways to create a hybrid application with the Mobile SDK:</p>

<ol>
<li>Using the Mobile SDK Command Line Interface (CLI)</li>
<li>Using the Cordova CLI, and installing the Salesforce Mobile SDK as a Cordova plugin</li>
</ol>

<blockquote>
<p>The Salesforce Mobile SDK CLI wraps the Cordova CLI: In addition to creating a Cordova project, it automatically sets up the Mobile SDK plugin and config file (bootconfig.json).</p>
</blockquote>

<p>We cover the first approach in this module, and the second approach in the <a href="mobilesdk-plugin.html">next module</a>.</p>

<h2>Step 1: Create the Project</h2>

<p>To create a Salesforce application using the Mobile SDK CLI:</p>

<ol>
<li><p>Install <a href="https://nodejs.org">Node.js</a> if it&#39;s not already installed on your computer (Cordova and the Salesforce Mobile SDK are installed using <strong>npm</strong>, the Node.js Package Manager).</p></li>
<li><p>Install Cordova and the Salesforce Mobile SDK for the platform of your choice. For example, for iOS:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">npm install -g cordova forceios
</code></pre></div>
<p>On a Mac, you may have to use sudo:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">sudo npm install -g cordova forceios
</code></pre></div>
<blockquote>
<p>To install the Mobile SDK CLI for Android, replace <code>forceios</code> with <code>forcedroid</code>.</p>
</blockquote></li>
<li><p>Create a new mobile application:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">forceios create
</code></pre></div></li>
<li><p>Answer the prompts as follows (adjust the company id and organization name as needed):</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">Enter your application type (native, hybrid_remote, or hybrid_local): hybrid_local
Enter your application name: firstapp
Enter the output directory for your app (defaults to the current directory):
Enter your company identifier (com.mycompany): com.mycompany.firstapp
Enter your organization name (Acme, Inc.): MyCompany, Inc.
Enter your Connected App ID (defaults to the sample app’s ID):
Enter your Connected App Callback URI (defaults to the sample app’s URI):
</code></pre></div>
<blockquote>
<p>When you don&#39;t provide values for the Connected App Id and Callback URI, the Mobile SDK defaults to a sample Connected App that is suitable for development and testing. For a production application, you should create a Connected App in Salesforce and provide your own Connected App ID and Callback URI.</p>
</blockquote></li>
<li><p>Navigate (cd) to the project directory:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">cd firstapp
</code></pre></div>
<p>Examine the directory structure. The <code>www</code> directory contains the web
application.</p></li>
</ol>

<h2>Step 2: Run the App on Device</h2>

<p>To run the application on a mobile device or in an emulator, you need the vendor&#39;s SDK for the target platform installed on your computer (for example, you need Xcode and the iOS SDK to build the app for iOS, and the Android SDK to build the app for Android). If you don&#39;t have a vendor SDK available on your computer, you can still run the application in your browser. In that case, skip this step and go directly to step 3 below.</p>

<ol>
<li><p>Add some useful Cordova plugins (optional):</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">cordova plugin add cordova-plugin-console
cordova plugin add cordova-plugin-statusbar
</code></pre></div>
<blockquote>
<p>Check out <a href="https://cordova.apache.org/docs/en/latest/guide/cli/index.html">this page</a> in the Cordova documentation for more information on the Cordova CLI and plugins.</p>
</blockquote></li>
<li><p>Build the project:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">cordova build
</code></pre></div></li>
<li><p>Run the project. For example, for iOS, open the project (<code>platforms/ios/firstapp.xcodeproj</code>) in Xcode and run it in the emulator or on your iOS device.</p>

<div class="picture-frame">
    <img src="images/oauth.png"/>
    <img src="images/userlist.png"/>
</div>

<blockquote>
<p>If the build fails in Xcode, select the firstapp target, click the <strong>Build Settings</strong> tab, search for <strong>bitcode</strong>, select <strong>No</strong> for <strong>Enable Bitcode</strong>, and try again.</p>
</blockquote>

<p><img src="images/bitcode.jpg" alt=""></p></li>
</ol>

<p>To make sure the header of your application doesn&#39;t collide with the iOS status bar:</p>

<ol>
<li><p>Make sure you installed the status bar plugin as described above</p></li>
<li><p>Add the following preferences to your project’s <strong>config.xml</strong>:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;preference name=&quot;DisallowOverscroll&quot; value=&quot;true&quot;/&gt;
&lt;preference name=&quot;StatusBarOverlaysWebView&quot; value=&quot;false&quot; /&gt;
&lt;preference name=&quot;StatusBarBackgroundColor&quot; value=&quot;#ffffff&quot; /&gt;
&lt;preference name=&quot;StatusBarStyle&quot; value=&quot;default&quot; /&gt;
</code></pre></div></li>
<li><p>Rebuild and run the project</p>

<div class="picture-frame">
    <img src="images/userlist2.png"/>
</div></li>
</ol>

<h2>Step 3: Modify the Sample App</h2>

<p>The sample application is built with <a href="https://github.com/developerforce/Force.com-JavaScript-REST-Toolkit">ForceTK</a>, the Force.com JavaScript REST Toolkit. In this section, we modify the application to use <a href="https://github.com/ccoenraets/forcejs">ForceJS</a> instead of ForceTK. ForceJS is similar to ForceTK with a few differences:</p>

<ul>
<li>ForceJS has no jQuery dependency</li>
<li>ForceJS provides a full implementation of the OAuth workflow when running in the browser</li>
<li>ForceJS allows you to run your app on device and in the browser without any code modification, greatly improving the developer experience. When running on device, the authentication process is handled by the Mobile SDK OAuth plugin. When running in the browser, ForceJS provides a full implementation of the OAuth workflow.</li>
<li>ForceJS is also available as an <a href="https://github.com/ccoenraets/forceng">Angular 1.x module</a> and an <a href="https://github.com/ccoenraets/forcejs/tree/es6">ECMAScript 6 module</a>.</li>
<li>ForceJS comes with <a href="https://github.com/ccoenraets/force-server">force-server</a>, a companion development server.</li>
</ul>

<p>To modify the application to use ForceJS:</p>

<ol>
<li><p><a href="https://github.com/ccoenraets/forcejs/archive/master.zip">Download</a> forcejs.</p></li>
<li><p>Copy the <code>force.js</code> file in the <code>firstapp/www/js</code> folder.</p></li>
<li><p>Delete <code>forcetk.mobilesdk.js</code> and <code>jquery.js</code> from the <code>firstapp/www/js</code> folder</p></li>
<li><p>Open <code>firstapp/www/index.html</code> in your favorite code editor and make the following changes:</p>

<ul>
<li>Remove the <code>jquery</code> script tag</li>
<li>On the next line, replace <code>js/forcetk.mobilesdk.js</code> with <code>js/force.js</code></li>
</ul></li>
<li><p>Open <code>www/js/app.js</code> in your favorite code editor and examine the code.</p>

<blockquote>
<p>Notice that, as it is, the code works with a direct reference to the Mobile SDK plugin. As a result, you can only run the app on device or in an emulator: you can&#39;t test it in the browser first and run it on device later.</p>
</blockquote></li>
<li><p>Remove the existing code, and replace it with the following code:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">force.login(function() {
    force.query(&#39;SELECT Id, Name FROM User LIMIT 10&#39;, function (response) {
        var html = &#39;&#39;;
        var users = response.records;
        for (var i = 0; i &lt; users.length; i++) {
            html += &#39;&lt;li class=&quot;table-view-cell&quot;&gt;&#39; + users[i].Name + &#39;&lt;/li&gt;&#39;;
        }
        document.getElementById(&#39;users&#39;).innerHTML = html;
    });
});
</code></pre></div>
<blockquote>
<p>force.login() abstracts the authentication process. When running in Cordova,
force.login() leverages the Mobile SDK OAuth plugin. When running in the
browser, force.login() provides a full implementation of the OAuth workflow.</p>
</blockquote></li>
<li><p>Rebuild the project</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">cordova build
</code></pre></div></li>
<li><p>Run the project</p></li>
</ol>

<h2>Step 4: Run the App in the Browser</h2>

<p>As mentioned above, one of the benefits of ForceJS is that you can run the application in the browser or on device without code modification. To run the application in the browser, we use <a href="https://github.com/ccoenraets/force-server">force-server</a>, a simple development server aimed at providing a simple and integrated developer experience when building applications that use Salesforce OAuth and REST services. force-server provides two main features:</p>

<ul>
<li>A Local Web Server to (1) serve the OAuth callback URL defined in your Connected App, and (2) serve the whole app during development and avoid cross-domain policy issues when loading files (for example, templates) from the local file system.</li>
<li>A Proxy Server to avoid cross-domain policy issues when invoking Salesforce REST services. (The Chatter API supports CORS, but other APIs don’t yet)</li>
</ul>

<p>To run the application in the browser using force-sever:</p>

<ol>
<li><p>Install force-server</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">npm install -g force-server
</code></pre></div>
<p>or</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">sudo npm install -g force-server
</code></pre></div></li>
<li><p>Navigate (cd) to your app&#39;s <code>www</code> directory</p></li>
<li><p>Start the server</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">force-server
</code></pre></div>
<p>This command will start the server on port 8200, and automatically load your app (http://localhost:8200) in a browser window. You&#39;ll see the Salesforce login window (make sure you enable the popup), and the list of contacts will appear after you log in. If you don’t have a free Salesforce Developer Edition to log in to, you can create one <a href="https://developer.salesforce.com/signup">here</a>.</p>

<p><img src="images/userlist-browser.jpg" alt=""></p>

<p>You can change the port number and the web root. Type the following command for more info:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">force-server --help
</code></pre></div></li>
</ol>

<div class="row" style="margin-top:40px;">
<div class="col-sm-12">
<a href="index.html" class="btn btn-default"><i class="glyphicon glyphicon-chevron-left"></i> Previous</a>
<a href="mobilesdk-plugin.html" class="btn btn-default pull-right">Next <i class="glyphicon glyphicon-chevron-right"></i></a>
</div>

<p></div></p>



        <!--<div class="row" style="margin-top: 30px;">-->
            <!--<div class="col-xs-12">-->
                <!--<div id="disqus_thread"></div>-->
                <!--<script type="text/javascript">-->
                    <!--/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */-->
                    <!--var disqus_shortname = 'salesforcelightningtutorial'; // required: replace example with your forum shortname-->

                    <!--/* * * DON'T EDIT BELOW THIS LINE * * */-->
                    <!--(function() {-->
                        <!--var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;-->
                        <!--dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';-->
                        <!--(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);-->
                    <!--})();-->
                <!--</script>-->
                <!--<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>-->
                <!--<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>-->
            <!--</div>-->
        <!--</div>-->


    </div>

    <div class="col-xs-12 col-sm-4 right-nav">

        <div class="panel panel-default">
            <!-- Default panel contents -->
            <div class="panel-heading" style="font-variant:small-caps;font-size: 18px;">index</div>
            <ol class="list-group" style="padding-bottom:12px">
                <li><a href="mobilesdk-cli.html">Using the Mobile SDK CLI</a></li>
                <li><a href="mobilesdk-plugin.html">Adding the Mobile SDK to a Cordova Project</a></li>
                <li><a href="mobilesdk-ionic.html">Building an Ionic App with the Mobile SDK</a></li>
                <li><a href="mobilesdk-hybrid-remote.html">Creating a Hybrid Remote App</a></li>
                <li><a href="mobilesdk-ionic2.html">Preview: ECMAScript 6 and Ionic 2</a></li>
            </ol>
        </div>
        <a href="https://twitter.com/share" class="twitter-share-button" data-size="large" data-url="http://ccoenraets/github.io/getting-started-lightning-components" data-text="Getting started with Lightning Components">Tweet</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>


    </div>

</div>

</div>

<div class="container">
    <div id="footer">
        <p class="text-muted">Salesforce Mobile SDK Tutorial, 2015.</p>
    </div>    <!-- Site footer -->
</div>


<script src="lib/jquery.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
</body>
</html>

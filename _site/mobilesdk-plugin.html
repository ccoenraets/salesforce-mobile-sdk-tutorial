<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../assets/ico/favicon.ico">

    <title>Salesforce Mobile SDK Tutorial</title>

    <!-- Bootstrap core CSS -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/styles.css" rel="stylesheet">
    <link href="css/syntax.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-721308-2', 'ccoenraets.github.io');
      ga('send', 'pageview');
    </script>
</head>

<body>

<div class="navbar navbar-default navbar-static-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html">Salesforce Mobile SDK Tutorial</a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li><a
                        href="https://github.com/ccoenraets/salesforce-developer-workshop"><img
                        src="images/icon-github.png" style="border: none;margin: -4px 0;height: 28px;width: 28px;"/>
                    GitHub
                    Project</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</div>


<div class="container">

<div class="row">

    <div class="col-xs-12 col-sm-8">
        <h1>Adding the Mobile SDK Plugin to a Cordova Project</h1>
        <!--<hr/>-->
        <p>As mentioned in the previous module, there are two ways to create a hybrid application with the Mobile SDK:</p>

<ol>
<li>Using the Mobile SDK Command Line Interface (CLI)</li>
<li>Using the Cordova CLI, and installing the Salesforce Mobile SDK as a Cordova plugin</li>
</ol>

<p>We covered the first approach in the <a href="mobilesdk-cli.html">previous module</a> and cover the second approach in this module.</p>

<h2>Step 1: Create a Cordova Application</h2>

<p>To create an application using the Cordova CLI:</p>

<ol>
<li><p>Make sure Cordova is installed on your computer</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">npm install -g cordova
</code></pre></div>
<p>On a Mac, you may have to use sudo:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">sudo npm install -g cordova
</code></pre></div></li>
<li><p>Create a new application:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">cordova create contactmanager com.mycompany.contactmanager ContactManager
</code></pre></div></li>
<li><p>Navigate (cd) to the project directory</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">cd contactmanager
</code></pre></div></li>
<li><p>Add some useful Cordova plugins (optional):</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">cordova plugin add cordova-plugin-device
cordova plugin add cordova-plugin-console
cordova plugin add cordova-plugin-statusbar
</code></pre></div>
<blockquote>
<p>Check out <a href="https://cordova.apache.org/docs/en/latest/guide/cli/index.html">this page</a> in the Cordova documentation for more information on the Cordova CLI and plugins</p>
</blockquote></li>
</ol>

<h2>Step 2: Add the Salesforce Mobile SDK Plugin</h2>

<ol>
<li><p>Add the Salesforce Mobile SDK plugin:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">cordova plugin add https://github.com/forcedotcom/SalesforceMobileSDK-CordovaPlugin
</code></pre></div></li>
<li><p>Create the Salesforce Mobile SDK config file (bootconfig.json) in the <strong>www</strong> folder of your project:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">{
  &quot;remoteAccessConsumerKey&quot;: &quot;3MVG9Iu66FKeHhINkB1l7xt7kR8czFcCTUhgoA8Ol2Ltf1eYHOU4SqQRSEitYFDUpqRWcoQ2.dBv_a1Dyu5xa&quot;,
  &quot;oauthRedirectURI&quot;: &quot;testsfdc:///mobilesdk/detect/oauth/done&quot;,
  &quot;oauthScopes&quot;: [
    &quot;web&quot;,
    &quot;api&quot;
  ],
  &quot;isLocal&quot;: true,
  &quot;startPage&quot;: &quot;index.html&quot;,
  &quot;errorPage&quot;: &quot;error.html&quot;,
  &quot;shouldAuthenticate&quot;: true,
  &quot;attemptOfflineLoad&quot;: false
}
</code></pre></div>
<blockquote>
<p>For a production application, you should create a Connected App in Salesforce and provide your own Connected App ID and Callback URI.</p>
</blockquote></li>
</ol>

<h2>Step 3: Build and Run</h2>

<p>To run the application on a mobile device or in an emulator, you need the vendor&#39;s SDK for the target platform installed on your computer (for example, you need Xcode and the iOS SDK to build the app for iOS, and the Android SDK to build the app for Android). If you don&#39;t have a vendor SDK available on your computer, you can still run the application in the browser on your computer. In that case, skip this step and go directly to step 4 below.</p>

<ol>
<li><p>To make sure the header of your application doesn&#39;t collide with the iOS status bar, add the following preferences to your projectâ€™s <strong>config.xml</strong>:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;preference name=&quot;DisallowOverscroll&quot; value=&quot;true&quot;/&gt;
&lt;preference name=&quot;StatusBarOverlaysWebView&quot; value=&quot;false&quot; /&gt;
&lt;preference name=&quot;StatusBarBackgroundColor&quot; value=&quot;#ffffff&quot; /&gt;
&lt;preference name=&quot;StatusBarStyle&quot; value=&quot;default&quot; /&gt;
</code></pre></div></li>
<li><p>Add a platform. For example to add iOS:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">cordova platform add ios
</code></pre></div></li>
<li><p>Build for the platform you added. For example to build for iOS:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">cordova build ios
</code></pre></div></li>
<li><p>Run the project. For example, for iOS, open the project (<code>platforms/ios/ContactManager.xcodeproj</code>) in Xcode and run it in the emulator or on your iOS device</p>

<div class="picture-frame">
    <img src="images/oauth.png"/>
    <img src="images/default-app.png"/>
</div>

<blockquote>
<p>If the build fails in Xcode, select the ContactManager target, click the <strong>Build Settings</strong> tab, search for <strong>bitcode</strong>, select <strong>No</strong> for <strong>Enable Bitcode</strong>, and try again.</p>
</blockquote></li>
</ol>

<h2>Step 4: Access Salesforce Data</h2>

<ol>
<li><p><a href="https://github.com/ccoenraets/forcejs/archive/master.zip">Download</a> forcejs.
See the <a href="mobilesdk-cli.html">previous module</a> for more information on forcejs.</p></li>
<li><p>Copy the <code>force.js</code> file in the <code>contactmanager/www/js</code> folder.</p></li>
<li><p>Open <code>index.html</code> in your favorite code editor. Replace the existing content of the file with the following code:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1, maximum-scale=1, user-scalable=no&quot;&gt;
    &lt;link href=&quot;https://cdnjs.cloudflare.com/ajax/libs/ratchet/2.0.2/css/ratchet.css&quot; rel=&quot;stylesheet&quot;&gt;
    &lt;script src=&quot;cordova.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;js/force.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;js/app.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;header class=&quot;bar bar-nav&quot;&gt;
        &lt;h1 class=&quot;title&quot;&gt;Salesforce Contacts&lt;/h1&gt;
    &lt;/header&gt;
    &lt;div class=&quot;content&quot;&gt;
        &lt;ul id=&quot;contacts&quot; class=&quot;table-view&quot;&gt;&lt;/ul&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div></li>
<li><p>Open <code>js/app.js</code> in your favorite code editor. Replace the existing content of the file with the following code:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">function showContacts() {
    force.query(&#39;SELECT Name, Phone FROM Contact LIMIT 20&#39;,
        function(data) {
            var contacts = data.records,
                html = &#39;&#39;;
            for (var i=0; i &lt; contacts.length; i++) {
                html += (&#39;&lt;li class=&quot;table-view-cell&quot;&gt;&lt;div class=&quot;media-body&quot;&gt;&#39; +
                            contacts[i].Name + &#39;&lt;p&gt;&#39; + contacts[i].Phone +
                            &#39;&lt;/p&gt;&lt;/div&gt;&lt;/li&gt;&#39;);
            }
            document.querySelector(&#39;#contacts&#39;).innerHTML = html;
        },
        function(error) {
            alert(&quot;Can&#39;t load contacts: &quot; + error);
        });
}

force.login(showContacts, function(error) {
    alert(&#39;Authentication failed: &#39; + error);
});
</code></pre></div></li>
<li><p>Rebuild the project</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">cordova build ios
</code></pre></div></li>
<li><p>Run the project</p>

<div class="picture-frame">
    <img src="images/contactlist.png"/>
</div></li>
</ol>

<h2>Step 5: Run in the Browser</h2>

<p>To run the application in the browser using force-sever:</p>

<ol>
<li><p>Make sure force-server is installed on your computer. See the <a href="mobilesdk-cli.html">previous module</a> for more information about force-server.</p></li>
<li><p>Navigate (cd) to your project&#39;s <code>www</code> directory</p></li>
<li><p>Start the server</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">force-server
</code></pre></div>
<p>This command will start the server on port 8200, and automatically load your app (http://localhost:8200) in a browser window. You&#39;ll see the Salesforce login window (make sure you enable the popup), and the list of contacts will appear after you log in. </p>

<p><img src="images/contactlist-browser.jpg" alt=""></p>

<p>You can change the port number and the web root. Type the following command for more info:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">force-server --help
</code></pre></div></li>
</ol>

<div class="row" style="margin-top:40px;">
<div class="col-sm-12">
<a href="mobilesdk-cli.html" class="btn btn-default"><i class="glyphicon glyphicon-chevron-left"></i> Previous</a>
<a href="mobilesdk-ionic.html" class="btn btn-default pull-right">Next <i class="glyphicon glyphicon-chevron-right"></i></a>
</div>

<p></div></p>



        <!--<div class="row" style="margin-top: 30px;">-->
            <!--<div class="col-xs-12">-->
                <!--<div id="disqus_thread"></div>-->
                <!--<script type="text/javascript">-->
                    <!--/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */-->
                    <!--var disqus_shortname = 'salesforcelightningtutorial'; // required: replace example with your forum shortname-->

                    <!--/* * * DON'T EDIT BELOW THIS LINE * * */-->
                    <!--(function() {-->
                        <!--var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;-->
                        <!--dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';-->
                        <!--(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);-->
                    <!--})();-->
                <!--</script>-->
                <!--<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>-->
                <!--<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>-->
            <!--</div>-->
        <!--</div>-->


    </div>

    <div class="col-xs-12 col-sm-4 right-nav">

        <div class="panel panel-default">
            <!-- Default panel contents -->
            <div class="panel-heading" style="font-variant:small-caps;font-size: 18px;">index</div>
            <ol class="list-group" style="padding-bottom:12px">
                <li><a href="mobilesdk-cli.html">Using the Mobile SDK CLI</a></li>
                <li><a href="mobilesdk-plugin.html">Adding the Mobile SDK to a Cordova Project</a></li>
                <li><a href="mobilesdk-ionic.html">Building an Ionic App with the Mobile SDK</a></li>
                <li><a href="mobilesdk-hybrid-remote.html">Creating a Hybrid Remote App</a></li>
                <li><a href="mobilesdk-ionic2.html">Preview: ECMAScript 6 and Ionic 2</a></li>
            </ol>
        </div>
        <a href="https://twitter.com/share" class="twitter-share-button" data-size="large" data-url="http://ccoenraets/github.io/getting-started-lightning-components" data-text="Getting started with Lightning Components">Tweet</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>


    </div>

</div>

</div>

<div class="container">
    <div id="footer">
        <p class="text-muted">Salesforce Mobile SDK Tutorial, 2015.</p>
    </div>    <!-- Site footer -->
</div>


<script src="lib/jquery.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
</body>
</html>
